<!DOCTYPE html>
<html>

<head>
    <title>AWS S3 File Upload</title>
    <script src="../demo/temp.js"></script>
</head>

<body>
    <input id="file-chooser" type="file" />
    <button id="upload-button">Upload</button>
    <p id="results">
        <p></p>
        <script type="text/javascript">
            
            AWS.config.update({  
                sslEnabled:false,
                s3ForcePathStyle:true,
                endpoint: '192.168.1.28:8989'
                // endpoint: '192.168.40.140:7480'
            });

            var s3 = new AWS.S3({accessKeyId: "i",secretAccessKey: "like",region: "it"});

            var fileChooser = document.getElementById('file-chooser');
            var button = document.getElementById('upload-button');
            var results = document.getElementById('results');


            button.addEventListener('click', function () {
                var file = fileChooser.files[0];
                if (file) {
                    results.innerHTML = '';
                    var params = {
                        Bucket: 'ceph',
                        Key: file.name, 
                        // ContentType: file.type, 
                        Body: file, 
                        // ACL: 'public-read',
                        // 'Access-Control-Allow-Origin' : '*'
                    };
                    s3.upload(params, function (err, data) {
                        console.log(data);
                        console.log(err);
                        results.innerHTML = err ? 'ERROR!' : 'UPLOADED.';
                    });
                } else {
                    results.innerHTML = 'Nothing to upload.';
                }
            }, false);
        </script>
</body>

</html>